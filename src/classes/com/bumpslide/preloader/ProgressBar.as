package com.bumpslide.preloader {	    import flash.display.*;    import flash.events.Event;    import flash.utils.getTimer;    import flash.text.*;	        /**     * ProgressBar for Preloader     *      * @author David Knape     */    public class ProgressBar extends MovieClip {                		public var display_txt:TextField;		public var bar_mc:MovieClip;		public var border:MovieClip;		public var background:MovieClip;				var _start:int;		var _delay:int = 750;		var _offset:Number = 0;		var _fullwidth:Number = 176;		        public function ProgressBar() {			stop();			reset();			addEventListener( Event.ADDED_TO_STAGE, init );        }                function init(e:Event=null):void {						// auto-size the text field			display_txt.autoSize = TextFieldAutoSize.LEFT;							// stage resize stuff			stage.scaleMode = StageScaleMode.NO_SCALE;			stage.align = StageAlign.TOP_LEFT;				stage.addEventListener( Event.RESIZE, onStageResize, false, 0, true);			onStageResize();		}				public function reset():void {			visible = false;			_start = getTimer();			_offset = 0;			bar_mc.width = 0;			setText('');		}				private function onStageResize(e:Event=null):void {			if(stage==null) return;			x = Math.round((stage.stageWidth-width)/2);			y = Math.round((stage.stageHeight-height)/2);		}				public function setDelay(d:Number):void {			_delay = d;				}				public function setPercent( pct:Number ):void {						// make sure percent is a float			if(pct>1) pct/=100;							trace('[ProgressBar] Loading '+Math.ceil(pct*100)+'%');						if(pct<0) return;			// wait for delay before displaying			if((getTimer()-_start) < _delay) {				trace('waiting');				return;			}					if(!visible) {				_offset = pct;				visible = true;				onStageResize();			}			pct = (pct-_offset) / (1-_offset);						bar_mc.width = Math.round( _fullwidth * pct);					}					public function setText(s:String):void{			display_txt.text = s;		}				public function hide():void {			visible = false;		}	    }}