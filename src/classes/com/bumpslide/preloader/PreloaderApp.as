package com.bumpslide.preloader {	    import flash.events.TimerEvent;        import flash.events.ProgressEvent;        import flash.display.MovieClip;    import flash.display.Loader;    import flash.events.Event;    import flash.net.URLRequest;    import flash.utils.Timer;            /**     * This is the document class for the preloader wrapper swf.     *      * To use, embed your swf as preloader.swf?swf=mainfile.swf     *      * Default SWF is "main.swf"     *       * @author David Knape     */    public class PreloaderApp extends MovieClip {    	    	public var progressbar_mc:ProgressBar;    	private var loader:Loader;    	        public function PreloaderApp() {        	       	        	        	var swfUrl:String = loaderInfo.parameters['swf']!=null ? loaderInfo.parameters['swf'] : 'main.swf';               	loader = new Loader(); 	        	loader.contentLoaderInfo.addEventListener( Event.INIT, startApp );            loader.contentLoaderInfo.addEventListener( ProgressEvent.PROGRESS, onLoaderProgress );            loader.load( new URLRequest( swfUrl ) );        }                private function onLoaderProgress(event:ProgressEvent=null) : void {        	progressbar_mc.setPercent( event.bytesLoaded / event.bytesTotal );        }        private function startApp( e:Event ) : void {        	// delay before starting app        	progressbar_mc.setPercent( 1 );        	        	// progressbar display was delayed, so it may not be visible        	// if progress bar was displayed, then wait a fraction of a second before starting        	// this is purely for cosmetic reasons (don't want to see a flicker of a loading bar)        	if(progressbar_mc.visible) {	        	var timer:Timer = new Timer( 250, 1 );	        	timer.addEventListener( TimerEvent.TIMER_COMPLETE, doStartApp );	        	timer.start();        	} else {        		doStartApp();        	}        }                private function doStartApp( e:Event=null) : void {        	// kill the progress bar        	progressbar_mc.reset();        	progressbar_mc.hide();        	removeChild( progressbar_mc );        	addChild( loader.content );        }    }}